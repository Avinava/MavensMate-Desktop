{"version":3,"sources":["reducers/reducer.js"],"names":["uuid","require","update","initialState","viewManager","show","views","loading","showUpdateNotification","action","releaseName","state","console","log","type","url","map","view","index","Object","assign","id","v1","pid","sldsSprite","sldsIconClassName","sldsIconName","obj","title","projectName","status","findView","find","viewIndex","findIndex","length","$splice","app"],"mappings":"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","file":"reducers/reducer.js","sourcesContent":["import {\n  SHOW_LOADING, HIDE_LOADING, ADD_VIEW, SHOW_VIEW,\n  SHOW_UPDATE_NOTIFIER, HIDE_UPDATE_NOTIFIER, DESTROY_VIEW,\n  UPDATE_VIEW, SHOW_VIEW_MANAGER, HIDE_VIEW_MANAGER\n} from '../actions/actions';\nconst uuid = require('node-uuid');\nconst update = require('react-addons-update');\n\nconst initialState = {\n  viewManager: {\n    show: false\n  },\n  views: [],\n  loading: false,\n  showUpdateNotification: false,\n  update: {\n    show: false,\n    action: '',\n    releaseName: ''\n  }\n};\n\nfunction views(state = [], action) {\n  console.log('views reducer', state, action);\n  switch (action.type) {\n    case ADD_VIEW:\n      let url = action.url || 'http://localhost:56248/app/home'\n      return [\n        ...state.map((view, index) => {\n          return Object.assign({}, view, {\n            show: false\n          })\n        }),\n        {\n          id: uuid.v1(),\n          show: true,\n          url: url,\n          pid: action.pid,\n          sldsSprite: 'standard-sprite',\n          sldsIconClassName: 'slds-icon-standard-generic-loading',\n          sldsIconName: 'generic_loading'\n        }\n      ]\n    case UPDATE_VIEW:\n      return state.map((view, index) => {\n        if (view.id === action.obj.id) {\n          // we dont update url here because user could be navigating, which will change src value\n          return Object.assign({}, view, {\n            pid: action.obj.pid || view.pid,\n            title: action.obj.title || view.title,\n            projectName: action.obj.projectName || view.projectName,\n            sldsIconClassName: action.obj.sldsIconClassName || view.sldsIconClassName,\n            sldsIconName: action.obj.sldsIconName || view.sldsIconName,\n            sldsSprite: action.obj.sldsSprite || view.sldsSprite,\n            status: action.obj.status || view.status\n          })\n        }\n        return view\n      })\n    case SHOW_VIEW:\n      return state.map((view, index) => {\n        return Object.assign({}, view, {\n          show: view.id === action.id ? true : false,\n          status: view.status === 'operation:stopped' ? 'none' : view.status\n        })\n      })\n    case DESTROY_VIEW:\n      function findView(view) {\n        return view.id === action.id;\n      }\n      let view = state.find(findView);\n      let viewIndex = state.findIndex(findView);\n      console.log('attempting to close view', viewIndex, view);\n      if (view.show && viewIndex !== 0 && !state[viewIndex-1].show)\n        state[viewIndex-1].show = true;\n      else if (view.show && viewIndex === 0 && state.length > 1 && !state[viewIndex+1].show)\n        state[viewIndex+1].show = true;\n      return update(state, {$splice: [[viewIndex, 1]]});\n    default:\n      return state\n  }\n}\n\nfunction app(state = initialState, action) {\n  switch (action.type) {\n    case SHOW_VIEW_MANAGER:\n      return Object.assign({}, state, {\n        viewManager: {\n          show: true\n        }\n      })\n    case HIDE_VIEW_MANAGER:\n      return Object.assign({}, state, {\n        viewManager: {\n          show: false\n        }\n      })\n    case ADD_VIEW:\n    case UPDATE_VIEW:\n    case SHOW_VIEW:\n    case DESTROY_VIEW:\n      return Object.assign({}, state, {\n        views: views(state.views, action)\n      })\n    case SHOW_LOADING:\n      return Object.assign({}, state, {\n        loading: true\n      })\n    case HIDE_LOADING:\n      return Object.assign({}, state, {\n        loading: false\n      })\n    case SHOW_UPDATE_NOTIFIER:\n      return Object.assign({}, state, {\n        update: {\n          show: true,\n          action: action.action,\n          releaseName: action.releaseName\n        }\n      })\n    case HIDE_UPDATE_NOTIFIER:\n      return Object.assign({}, state, {\n        update: {\n          show: false,\n          action: '',\n          releaseName: ''\n        }\n      })\n    default:\n      return state;\n  }\n}\n\nexport default app;\n"],"sourceRoot":"/source/"}